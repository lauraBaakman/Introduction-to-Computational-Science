%!TEX root = report.tex

\todo[inline]{Intro plus what one can find in this section... }
When simulating the dynamics of cracking material, one needs a model that represents the properties of that materials, mud in our case. In \cref{ss:method:model} we present our model. \Cref{ss:method:vogel} presents the model introduced by \citeauthor{vogel2005studies2} on which ours is loosely based. So that we can contrast the two models in \cref{ss:method:contrast}.

\subsection{The model}\label{ss:method:model}
% \todo[inline]{``Decribe our model:  1. Properties of single particles and connection between two (springs)''}
We use a spring simulation to model the rupture dynamics of mud. In this section we first describe the behavior and properties of one spring connecting two particles. \todo{Wat doen we in de rest van deze sectie}

Since the cracking of mud is a very slow process we can ignore Newton's and Stokes' law, i.e., we do not consider the effect of velocity and frictional forces in our model. Consequently our particles are massless and we only consider their location. This, and some other properties of our model, make it possible to find the new position of particles using a matrix vector equation, which can be solved with a linear solver.

\begin{figure}
	\centering
	  \begin{tikzpicture}
	    \node [free]  (left)  at  (0,0)   {\freeParticle{i}};
	    \node [free]  (right)   at  (4,0) {\freeParticle{j}};
	    \drawSpring{left}{right}{0}

	    \node (leftUpper) at (0,0.5) {};
	    \node (rightUpper) at (4,0.5) {};
	    \draw[dashed, <->] (leftUpper)--(rightUpper) node[foo] {$D_{ij} = \abs{x_i - x_j}$};

	    \node (leftLower) at (1,-0.5) {};
	    \node (rightLower) at (3,-0.5) {};
	    \draw[dashed, <->] (leftLower)--(rightLower) node[foo, below=1ex] {$l_0$};
	  \end{tikzpicture} %
	\caption{Illustration of a spring, \spring{0}, connecting the particles \freeParticle{i} and \freeParticle{j}. The distance between the two particles is represented by $D_{ij}$, $x_i$ and $x_j$ refer to the position of \freeParticle{i} and \freeParticle{j}, respectively. The natural length of a spring is represented by $l_0$.}
	\label{fig:method:spring}
\end{figure}


% \todo[inline]{Decribe how springs break (two or three methods)}

\Cref{fig:method:spring} illustrates a single connection between two particles \freeParticle{i} and \freeParticle{j}. The connection between the two particle is modeled with the spring \spring{0}. The force $F$ on a Hookean spring is defined as
\begin{equation}\label{eq:method:hookeslaw}
	F = -k X,	
\end{equation}
where $F$ is the restoring force exerted by the spring on whatever is pulling on the other end. $X$ is the displacement of the string from it's relaxed position. To ensure that the final system of equations is linearly solvable we have to use springs with a natural length of zero. Consequently $X$ is equal to the distance between the particles that are connected by the spring, i.e., $D_{ij}$ in \cref{fig:method:spring}. If the stress on a spring exceeds some threshold, or is among the $n$ springs with the highest stress the string breaks, and cracks appear.

\rick{Read the following paragraph(s) which should implement the following todo: ``Describe our model: 2. Initialization of the grid and spring constants. (Which distribution and parameters)'' Ik heb de eerste alinea gelezen, maar daarna mist er te veel om er echt iets over te zeggen.}
Now that we know the properties of one connection between a pair of particles we can consider a network of these particles. We have opted for a uniform square grid to  simulate the are of rupturing mud, see \cref{fig:model:layout}. Note that one can easily use an alternative initial layout with our model.
%
\begin{figure}
	\centering
	\includegraphics[width=0.9\columnwidth]{img/uniform_square_grid.png}
	\caption{Initial placement of the particles, used to represent a layer of mud without any cracks. The blue squares represent the fixed particles, whose location does not change during the simulation. The red particles change position, the green lines represent springs between the particles.}
	\label{fig:model:layout}
\end{figure}
%
\rick{Write stuff about forces on particles and that we simplify them}
The force on a single particle is then given by:
%
\begin{equation}\label{eq:single:force}
	F_i = - \Sigma_{j \in N_i} k_{ij} \frac{x_i - x_j}{|x_i - x_j|}[|x_i - x_j| - l_0].
\end{equation}
%
The set $N_i$ are the neighboring particles of particle $v_i$. For every spring between two particles $v_i$ and $v_j$ a constants $k_ij$ can be chosen randomly or from some distribution, see \cref{s:implementation} for the discussion about the details. The variable $l_0$ represents the natural length of a spring, i.e., the length of a spring that is only connected to a single particle and thus is not stretched. To be able to linearly solve the system we discard this term by setting it to zero. By doing so the formula for the force $F_i$ on a particle $v_i$ is given by:
%
\begin{equation}\label{eq:single:force:simple}
	F_i = - \Sigma_{j \in N_i} k_{ij}(x_i - x_j).
\end{equation}

\rick{Describe how the model can be solved/stabilized}

With the formula in \eqref{eq:single:force:simple} we can now compute all the forces on every particle and move the particle to the locations, such that the system is stable, i.e., $F_i = 0 \forall_i$. With this we can find the $L$ matrix:
%
\begin{equation}\label{eq:method:stabilizationEquationLHS}
	L = A^T K A .* C
\end{equation}
%
\begin{equation}\label{eq:method:stabilizationEquation}
	L\vec{x} = \vec{r}.
\end{equation}
%
If this formula we find the new positions $\vec{x}$ of the particles by solving the 

\todo[inline]{Reference that the step after this is the solve/stabilization part of this section.}

\subsection{The Vogel model}\label{ss:method:vogel}

\todo[inline]{Short review of the model from Vogel et al. So we can contrast this in the last section}

\subsection{Contrast}\label{ss:method:contrast}

\todo[inline]{Describe the important differences of the two models.}


\todo[inline]{Story from the presentation. Different types of particles. Springs. How the particles are connected, with those springs (square uniform grid). Things like energy and what is a stable system?}

